<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Restaurant Approval Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">
  <header class="bg-white shadow p-4">
    <h1 class="text-2xl font-bold text-gray-700">Restaurant Approval Management</h1>
  </header>
    <div class="max-w-6xl mx-auto mt-8 p-4">
        <div id="restaurantListPage">
         <h2 class="text-xl font-semibold mb-4">Restaurant List</h2>

            <table class="min-w-full bg-white rounded shadow">
                <thead>
                    <tr class="bg-gray-200 text-left text-sm font-semibold">
                     <th class="p-3">Name</th>
                     <th class="p-3">Location</th>
                     <th class="p-3">Owner</th>
                     <th class="p-3">Status</th>
                     <th class="p-3">Actions</th>
                    </tr>
                </thead>
                <tbody id="restaurantTable"></tbody>
            </table>
        </div>
        <div id="restaurantDetailsPage" class="hidden">
            <button onclick="showRestaurantList()" class="mb-4 px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
             ← Back
            </button>

            <div id="restaurantDetails"></div>
        </div>
    </div>

    <div id="rejectModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-20">
        <div class="bg-white p-6 rounded shadow-lg w-96">
          <h3 class="text-lg font-semibold mb-4">Rejection Reason</h3>
            <textarea id="rejectReason" class="w-full p-2 border rounded mb-4" rows="4"
                placeholder="Enter rejection reason">
            </textarea>

            <div class="flex justify-end gap-2">
                <button onclick="closeRejectModal()" class="px-4 py-2 bg-gray-300 rounded hover:bg-gray-400">
                    Cancel
                </button>
                <button onclick="submitRejection()" class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700">
                    Submit
                </button>
            </div>
        </div>
    </div>

    <script>
        const restaurants = [
           {
            id: 1,
            name: "Sunset Grill",
            location: "Kigali - Kimironko",
            owner: "Jean Bosco",
            status: "Pending",
            info: "A modern grill restaurant specializing in roasted meats and grilled vegetables.",
            menu: {
            "Starters": [
            { item: "Grilled Corn", price: 1500 },
            { item: "Chicken Skewers", price: 3000 },
            { item: "Beef Brochettes", price: 3500 }
            ],
            "Main": [
            { item: "Full Chicken Grill", price: 12000 },
            { item: "Beef Steak", price: 12000 },
            { item: "Fish & Chips", price: 8000 },
            { item: "Grilled Goat Meat", price: 10000 }
            ],
            "Drinks": [
            { item: "Passion Juice", price: 1500 },
            { item: "Lemonade", price: 1000 },
            { item: "Mint Tea", price: 1000 },
            { item: "Cold Beer", price: 2000 }
            ]
            },
            ownerInfo: "Owner with 5 years of experience in hospitality.",
            rejectionReason: ""
           },
           {
             id: 2,
             name: "Green Leaf Café",
             location: "Kigali - Kicukiro",
             owner: "Alice Mukamana",
             status: "Approved",
             info: "Healthy meals with vegan options and organic ingredients.",
             menu: {
             "Salads": [
              { item: "Avocado Salad", price: 3500 },
              { item: "Greek Salad", price: 4000 },
              { item: "Fruit Bowl", price: 3000 }
             ],
             "Main": [
              { item: "Veggie Wrap", price: 3500 },
              { item: "Tofu Stir Fry", price: 5500 },
              { item: "Pumpkin Soup", price: 3000 }
             ],
             "Drinks": [
               { item: "Ginger Tea", price: 1000 },
               { item: "Green Tea", price: 1000 },
               { item: "Smoothies", price: 2500 }
             ]
             },
             ownerInfo: "Nutrition expert with passion for healthy foods.",
             rejectionReason: ""
            },
            {
              id: 3,
              name: "Royal Biryani House",
              location: "Kigali - Nyamirambo",
              owner: "Mohammed Ali",
              status: "Pending",
              info: "Authentic Indian biryani and spicy curry dishes.",
              menu: {
               "Starters": [
                { item: "Samosa", price: 500 },
                { item: "Chicken Tikka", price: 4000 },
                { item: "Paneer Fry", price: 3500 }
             ],
               "Biryani": [
                { item: "Chicken Biryani", price: 7000 },
                { item: "Mutton Biryani", price: 9000 },
                { item: "Vegetable Biryani", price: 6000 }
             ],
               "Drinks": [
                { item: "Mango Lassi", price: 2000 },
                { item: "Masala Tea", price: 1000 }
              ]
             },
             ownerInfo: "Indian cuisine specialist with 10 years experience.",
             rejectionReason: ""
            },
            {
             id: 4,
             name: "Mama Africa Dishes",
             location: "Kigali - Remera",
             owner: "Claudette Uwase",
             status: "Rejected",
             info: "Traditional African dishes prepared in a modern style.",
             menu: {
              "Local": [
               { item: "Igisafuriya", price: 5000 },
               { item: "Isombe", price: 3000 },
               { item: "Ibirayi bitogoshe", price: 1500 }
          ],
          "Meat": [
            { item: "Grilled Goat", price: 5000 },
            { item: "Beef Stew", price: 4000 },
            { item: "Chicken Curry", price: 4500 }
          ],
          "Drinks": [
            { item: "Milk", price: 500 },
            { item: "Soda", price: 600 },
            { item: "Fresh Juice", price: 1500 }
          ]
        },
        ownerInfo: "Experienced chef focusing on local cuisine.",
        rejectionReason: "Kitchen hygiene needed improvement."
      }
    ];

    let currentRestaurantId = null;

    function formatPrice(amount) {
      return "RWF " + amount.toLocaleString("en-US");
    }

    function loadRestaurantList() {
      const table = document.getElementById("restaurantTable");
      table.innerHTML = "";

      restaurants.forEach(r => {
        const statusClass =
          r.status === "Approved"
            ? "bg-green-600"
            : r.status === "Rejected"
            ? "bg-red-600"
            : "bg-yellow-600";

        const row = `
          <tr class="border-b text-sm">
            <td class="p-3">${r.name}</td>
            <td class="p-3">${r.location}</td>
            <td class="p-3">${r.owner}</td>
            <td class="p-3">
              <span class="px-2 py-1 rounded text-white ${statusClass}">
                ${r.status}
              </span>
            </td>
            <td class="p-3">
              <button onclick="viewDetails(${r.id})"
                      class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs">
                View
              </button>
            </td>
          </tr>
        `;
        table.innerHTML += row;
      });
    }

    function viewDetails(id) {
      const r = restaurants.find(x => x.id === id);
      if (!r) return;
      currentRestaurantId = id;

      let menuHTML = "";
      for (let category in r.menu) {
        const items = r.menu[category];
        const rows = items
          .map(
            item => `
              <tr class="border-b">
                <td class="p-2">${item.item}</td>
                <td class="p-2 text-right">${formatPrice(item.price)}</td>
              </tr>
            `
          )
          .join("");

        menuHTML += `
          <div class="mt-4">
            <h4 class="text-md font-semibold mb-1">${category}</h4>
            <table class="min-w-full text-sm border rounded overflow-hidden bg-white">
              <thead class="bg-gray-100">
                <tr>
                  <th class="p-2 text-left">Item</th>
                  <th class="p-2 text-right">Price (RWF)</th>
                </tr>
              </thead>
              <tbody>
                ${rows}
              </tbody>
            </table>
          </div>
        `;
      }

      const rejectionBlock =
        r.status === "Rejected" && r.rejectionReason
          ? `
            <div class="mt-4 bg-red-50 border border-red-200 text-red-800 text-sm p-3 rounded">
              <strong>Rejection Reason:</strong> ${r.rejectionReason}
            </div>
          `
          : "";

      const details = `
        <div class="bg-white rounded shadow p-5">
          <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">
            <div>
              <h2 class="text-2xl font-semibold">${r.name}</h2>
              <p class="text-gray-600 text-sm mt-1">${r.location}</p>
              <p class="text-gray-500 text-sm mt-1">${r.info}</p>
            </div>
            <div class="text-sm">
              <p><span class="font-semibold">Owner:</span> ${r.owner}</p>
              <p><span class="font-semibold">Status:</span>
                <span class="ml-1 px-2 py-1 rounded text-white text-xs ${
                  r.status === "Approved"
                    ? "bg-green-600"
                    : r.status === "Rejected"
                    ? "bg-red-600"
                    : "bg-yellow-600"
                }">${r.status}</span>
              </p>
            </div>
          </div>

          ${rejectionBlock}

          <div class="mt-6">
            <h3 class="font-semibold text-lg mb-2">Menu Preview</h3>
            ${menuHTML}
          </div>

          <div class="mt-6">
            <h3 class="font-semibold text-lg mb-2">Owner Information</h3>
            <p class="text-sm text-gray-700">${r.ownerInfo}</p>
          </div>

          <div class="mt-6 flex flex-wrap gap-3">
            <button onclick="approveRestaurant(${id})"
                    class="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm">
              Approve
            </button>
            <button onclick="openRejectModal(${id})"
                    class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 text-sm">
              Reject
            </button>
          </div>
        </div>
      `;

      document.getElementById("restaurantDetails").innerHTML = details;
      document.getElementById("restaurantListPage").classList.add("hidden");
      document.getElementById("restaurantDetailsPage").classList.remove("hidden");
    }

    function showRestaurantList() {
      document.getElementById("restaurantDetailsPage").classList.add("hidden");
      document.getElementById("restaurantListPage").classList.remove("hidden");
      loadRestaurantList();
    }

    function approveRestaurant(id) {
      const r = restaurants.find(x => x.id === id);
      if (!r) return;

      r.status = "Approved";
      r.rejectionReason = "";
      alert("Restaurant approved.");
      showRestaurantList();
    }

    function openRejectModal(id) {
      currentRestaurantId = id;
      document.getElementById("rejectReason").value = "";
      document.getElementById("rejectModal").classList.remove("hidden");
    }

    function closeRejectModal() {
      document.getElementById("rejectModal").classList.add("hidden");
    }

    function submitRejection() {
      const reason = document.getElementById("rejectReason").value.trim();
      if (!reason) {
        alert("Please enter a rejection reason.");
        return;
      }

      const r = restaurants.find(x => x.id === currentRestaurantId);
      if (!r) return;

      r.status = "Rejected";
      r.rejectionReason = reason;

      closeRejectModal();
      alert("Restaurant rejected.");
      showRestaurantList();
    }

    loadRestaurantList();
  </script>

</body>
</html>


